# Ultimate Scaler

**English** | [ÁÆÄ‰Ωì‰∏≠Êñá](README_CN.md)

[![CI Status](https://ci.appveyor.com/api/projects/status/dsti38xjw0jknojx?svg=true)](https://ci.appveyor.com/project/INF32768/ultimatescaler)
![GitHub Release](https://img.shields.io/github/v/release/INF32768/UltimateScaler)
![GitHub License](https://img.shields.io/github/license/INF32768/UltimateScaler)

[![CurseForge Downloads](https://img.shields.io/curseforge/dt/1323296?style=for-the-badge&logo=curseforge)](https://www.curseforge.com/minecraft/mc-mods/ultimate-scaler)
[![Modrinth Downloads](https://img.shields.io/modrinth/dt/ktrA4Qtm?style=for-the-badge&logo=modrinth)](https://www.modrinth.com/mod/ultimate-scaler)

**A Fabric mod for breaking the boundaries of Minecraft terrain generation and conducting in-depth research and exploration of terrain generation, especially the far lands and distance effects.**

Note: This document is primarily for developers and advanced users, for casual players who want to experience the content, please click on the badge above to go to the CurseForge or Modrinth page, where there are detailed installation instructions, screenshots, and user discussions.

> **Development Status: üõ†Ô∏è Refactoring in progress**
>
> We're modernizing our codebase and workflows with goals such as semantic version control, automated CI/CD pipelines, normalized commit history, and improved contributor guidelines. [Click here](https://github.com/INF32768/UltimateScaler/wiki/Project_Refactoring_zh) to go to the project wiki for more details.

## Technology Overview

This mod implements the following core capabilities through a series of underlying modifications to Minecraft's terrain generation system:

- **üß¨ Terrain Offset**: Steadily offset the terrain at large scales by intercepting and modifying noise sampling coordinates. At present, it has been able to offset most terrain generations.
- **üîß Distance Effects Fixes**: Fixed certain distance phenomena such as the "End Ring", abandoned mines not spawning, etc., and even fixed the far lands themselves.
- **üåê Remove soft restrictions**: Remove various artificially set restrictions, such as world boundaries, coordinate values in commands, and certain values in data packs.
- **üî¨ More Modifications**: Countless miscellaneous modifications, such as modifying values in noise sampling algorithms or recreating classic "sky grids".

Almost all functions are optional and can be turned on or off according to your needs.

## Start development

**Environment Configuration:**
- **JDK 21+**
- **Fabric Toolchain**
- **Dependencies**: Fabric API (runtime), Cloth Config API (optional, for GUI)

**Quick Build:**
```bash
git clone https://github.com/INF32768/UltimateScaler.git

cd UltimateScaler

./gradlew build
```

Then, find the jar file in the `build/libs` directory (select the one without `source` in the file name) and put it in the `.minecraft/mods` directory.

**Configuration file**: `.minecraft/config/ultimate_scaler.toml` (You can open the configuration GUI in the game using a hotkey, which is `Ctrl U` by default. If you manually modify the configuration file, you can execute the `/reload` command in the game for it to take effect.)

**Contribution:** We welcome all contributions, including issue reports, feature suggestions, and code commits. Before you begin, please read the [Contribution Guidelines](./CONTRIBUTING.md).

## Nightly builds

[![Build status](https://ci.appveyor.com/api/projects/status/gf3ma7wu8cd6uf23?svg=true)](https://ci.appveyor.com/project/INF32768/ultimatescaler-nightly)

Want to experience or test the latest code changes? If there is a code change on a given day, we release a nightly build that night or the next day.

1. **Access the Workflow Page**: Click on the badge above to enter the AppVeyor page.
2. **Choose the latest successful build**.
3. Download the file from the **Artifacts** tab of the build details page.

These builds include the latest features and fixes, but may also contain unstable changes. **Do not use for production environments.**

## Compatibility Notes

- **Supported Versions**:![CurseForge Game Versions](https://img.shields.io/curseforge/game-versions/1323296)
- **Compatibility**:
- ‚úÖ Compatible with terrain generation modifications based on data packs, for which offset algorithms take effect (e.g. _The Aether_).
- ‚ö†Ô∏è Compatible with mod parts generated by injected modified terrain, offset algorithms are usually not effective, but can coexist (e.g. _Modern Beta_).
- ‚ùå Not compatible with mods that invasively modify terrain generation, while loading causes the game to crash or various strange issues (e.g. _Concurrent Chunk Management Engine_).

## License

This project is open source under the MIT license. See [LICENSE](LICENSE) document for details.

This project has a built-in toml4j library, and its license is MIT, see [LICENSE-toml4j](third-party-licenses/LICENSE-toml4j) for details.

---

## Appendix: Technical Details

_This section contains detailed technical specifications and development plans, which will be migrated to the project wiki after the project is rebuilt and stabilized._ 

### A1. List of currently supported density function offsets

This mod currently supports offsetting the following core density functions through coordinate transformation:

- `old_blended_noise`
- `noise`
- `shifted_noise`
- `shift_A`
- `shift_B`
- `shift`
- `weird_scaled_sampler`
- `y_clamped_gradient` (optional)
- `end_island` (requires BigInteger rewrite)

### A2. Full Development Roadmap

#### Short-term plan

- [ ] Implement simple communication between the client and the server.
- [ ] Disable specified noise: Make specified noise always return 0 when sampling.
- [ ] Port to 1.18.2 ~ 1.20.6.
- [ ] New command: `noiseinfo`, which displays information related to a noise (such as value range, frequency, overflow position) when given a name or definition.
- [ ] Change the display of large values in the debugging screen to scientific notation.
- [x] Add comments to the configuration file.
- [x] Compatible with the server.
- [x] Offset the generation of the end island.
- [x] Offset the density function `weird_scaled_sampler`.
- [x] Rewrite the "noise" density function using BigInteger.
- [x] Automatically adjust the display of `TerrainPos` in the debugging screen according to the current offset mode.
- [x] Global fluid replacement: Replace specified fluids during terrain generation to prevent the game from lagging due to too many fluids.
- [x] Port to 1.21 ~ 1.21.1.
- [x] Offset the sea level and the underground lava layer.
- [x] Add usage instructions to the option interface.
- [x] Make the option screen available for Mods running on 1.21 - 1.21.1.
- [x] Port to 1.21.9.

#### Middle-term plan

- [ ] Port to 1.18.1 and below versions.
- [ ] Port to Forge loader.
- [ ] Add terrain generation algorithms of different versions of Java Edition, such as 1.18.1, 1.12.2, Beta version, and so on, up to Pre-Classic version.
- [ ] Fix various bugs that occur when the coordinates exceed 33554432, such as crashes, blocks not rendering, and lighting effects abnormalities.
- [ ] Generate sky grids in the fringe lands.
- [ ] Add "Quit without saving" feature.
- [ ] Prevent the game from crashing when chunk generation fails.
- [x] Remove the air walls at 30000000.

#### Long-term plan

- [ ] Rewrite the terrain generation algorithm using BigInteger, which can offset more terrain generation, including structures and other features, and the mod will probably release 1.0 version at that time.
- [ ] Add Minecraft Bedrock version of terrain generation algorithm, including old versions.
- [ ] Link with a minimap mod (not determined yet) and draw the noise and density function graphic on the map.
- [ ] Bypass the 32-bit integer limit, 64-bit integer limit, single-precision floating-point number limit, and even double-precision floating-point number limit in the world boundary, and the mod will probably release 2.0 version and change the name at that time.
- [ ] Bypass the Y-axis limit and support the generation of terrain with a height of 2147483647 (possibly higher?).
