version: '0.3.0(build {build})'
skip_tags: true
clone_depth: 1
environment:
  JAVA_HOME: C:\Program Files\Java\jdk21
cache:
  - C:\Users\appveyor\.gradle\caches\fabric-loom
  - C:\Users\appveyor\.gradle\caches\modules-2
build_script:
  - cmd: gradlew build --no-daemon
artifacts:
  - path: .\build\libs\UltimateScaler-0.3.0.jar
    name: UltimateScaler-0.3.0.jar
  - path: .\build\libs\UltimateScaler-0.3.0-sources.jar
    name: UltimateScaler-0.3.0-sources.jar
deploy:
  - provider: GitHub
    tag: v0.3.0
    release: 0.3.0
    description: '# 0.3.0 - 2025-8-8\n\n## 新特性 | New Features\n\n- 在`README.md`中添加了更新计划。 | Added the update plan in `README.md`.\n- 开始使用BigInteger重写原版地形生成算法，目前已重写噪声类密度函数和`end_islands`密度函数。 | Started the rewrite of the vanilla terrain generation algorithm with BigInteger, currently rewritten the noise-based density function and `end_islands` density functions.\n- 配置了Mixin Config Plugin。 | Configured the "Mixin config plugin".\n- 新增了偏移密度函数 `weird_scale_multiplier` 的功能。 | Added the ability to offset the density function `weird_scale_multiplier`.\n- 新增了扩展数据包字面量取值范围的功能。 | Added the ability to extend the literal value range of datapacks.\n- 新增了“Y轴扩展偏移”选项。 | Added the "Extra Y-axis offset" option.\n- 支持服务端运行。 | Support for server-side running.\n- 在配置文件中添加了注释。 | Added comments to the configuration file.\n- 新增了使用/reload命令重载配置文件的功能。 | Added the ability to reload the configuration file using the /reload command.\n- 新增了替换默认流体和地底熔岩的功能。 | Added the ability to replace the default fluids and underground lava.\n- 向下兼容至1.21。 | Ported down to 1.21.\n- 在选项界面中添加了常见问题。 | Added frequently asked questions to the options screen.\n- 现在AppVeyor构建版本将自动发布到GitHub Release。 | The AppVeyor build version will automatically release to GitHub Release.\n\n## 改进 | Improvements\n\n- 从现在开始，`Changelog.md` 将使用中英双语编写。 | From now on, `Changelog.md` will be written in both Chinese and English.\n- 提取了常用的偏移代码到 `Util` 类中。 | Extracted common offset code to `Util` class.\n- 调试屏幕中的 `TerrainXYZ` 现在会基于方块坐标计算，且会根据是否启用了 BigInteger 重写而显示不同的信息。 | The `TerrainXYZ` in the debug HUD now calculates based on block coordinates, and displays different information depending on whether BigInteger has been rewritten.\n- 优化了内部类的访问形式，不再使用 `accesswidener`。 | Optimized the access of internal classes, no longer using `accesswidener`.\n- 优化了“shift”类密度函数的偏移方式，不再使用 `@Overwrite` 而改用 `@ModifyArgs`，且类不再实现 `DensityFunctionTypes.Offset`。 | Optimized the offset of the "shift" class density function, no longer using `@Overwrite` but `@ModifyArgs`, and the class no longer implements `DensityFunctionTypes.Offset`.\n- 清除了编译时警告（再次）。 | Cleared compile-time warnings (again).\n- [!] 更改了Mod ID，不再兼容旧版本。 | Changed the Mod ID, no longer compatible with old versions.\n- 彻底重写了配置系统（不再兼容旧版，但是会自动迁移）。 | Completely rewrote the configuration system (not compatible with old versions, but will automatically migrate).\n- 在配置文件中添加了文件版本号。 | Added file version number to the configuration file.\n- Cloth Config 不再是必须依赖。 | Cloth Config is no longer required as a must-have dependency.\n- 为客户端类添加了注解。 | Added annotations to client classes.\n- 重写了末地岛屿生成算法。 | Revised the algorithm for generating the end islands.\n- 将“模拟末地环”更改为“修复末地环”，功能同样修改，且不需要再开启BigInteger重写。| Changed "Simulate End Rings" to "Fix End Rings", function is the same, and no longer need to enable BigInteger rewrite.\n- 将“替换地底熔岩”移入实验性功能。 | Moved "Replace Underground Lava" to experimental features.\n- 向`README.md`添加了徽章和更多内容。 | Added badges and more content to `README.md`.\n- 替换了ObjectValueWriter.class中已弃用的方法。 | Replaced the deprecated methods in ObjectValueWriter.class.\n- 去除了无用的import。 | Removed unnecessary imports.\n- 用中英双语重写了`Changelog.md`中原本只有英文的部分。 | Revised the English parts of `Changelog.md` into both Chinese and English.\n- 从现在开始，若一个次要更新的正式版发布，则将`Changelog.md`中其对应的开发版本的更新内容进行整合。 | From now on, if a formal release of a minor update is made, the corresponding development version update content in `Changelog.md` will be integrated.\n\n## 漏洞修复 | Bug Fixes\n\n- 修复了类 `MixinAbstractChunkHolder` 未被声明为抽象类的问题。 | Fixed that the class `MixinAbstractChunkHolder` was not declared as an abstract class.\n- 修复了修改后 `weird_scale_multiplier` 密度函数无法正常工作的问题。 | Fixed that the modified `weird_scale_multiplier` density function did not work properly.\n- 修复了当边境之地位置为`RELEASE`时，噪声不会在负半轴上溢出的问题。 | Fixed that the noise would not overflow below the negative half-axis when the far lands position is set to `RELEASE`.\n'
    auth_token:
      secure: MuYLGwuMDMlX3bB/PQL+ww4cs9Mmc2Nb0I2L4Ps2+GASo/K26MEUbFY1UVIgS2HR #有效期至2025-9-8
    artifact: UltimateScaler-0.3.0.jar
    draft: false
    prerelease: false
